<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¿®å¤ç‰ˆé‡‘èæ•°æ®åˆ†æä»ªè¡¨æ¿</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #333;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .chart-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .card-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 1.2rem;
            color: white;
        }
        
        .icon-interest { background: linear-gradient(45deg, #FF6B6B, #FF8E8E); }
        .icon-tax { background: linear-gradient(45deg, #4ECDC4, #6BFFEE); }
        .icon-portfolio { background: linear-gradient(45deg, #45B7D1, #6FC4FF); }
        .icon-inflation { background: linear-gradient(45deg, #96CEB4, #B8FFD6); }
        
        .card-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #333;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            margin-top: 20px;
        }
        
        .loading {
            text-align: center;
            padding: 50px;
            color: white;
            font-size: 1.2rem;
        }
        
        .error {
            background: #ffebee;
            color: #c62828;
            padding: 20px;
            border-radius: 10px;
            margin: 20px;
            text-align: center;
        }
        
        .success {
            background: #e8f5e8;
            color: #2e7d32;
            padding: 20px;
            border-radius: 10px;
            margin: 20px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“Š é‡‘èæ•°æ®åˆ†æä»ªè¡¨æ¿</h1>
            <div class="subtitle">åˆ©ç‡ã€ç¨æ”¶ã€æŠ•èµ„ç»„åˆä¸é€šèƒ€è¶‹åŠ¿åˆ†æ</div>
        </header>
        
        <div id="status-message"></div>
        
        <div id="loading" class="loading">
            ğŸ”„ æ­£åœ¨åŠ è½½æ•°æ®...
        </div>
        
        <div id="dashboard" style="display: none;">
            <div class="dashboard-grid">
                <!-- åˆ©ç‡å›¾è¡¨ -->
                <div class="chart-card">
                    <div class="card-header">
                        <div class="card-icon icon-interest">ğŸ“‰</div>
                        <div class="card-title">è”é‚¦åŸºé‡‘åˆ©ç‡èµ°åŠ¿</div>
                    </div>
                    <div class="chart-container">
                        <canvas id="interestRateChart"></canvas>
                    </div>
                </div>
                
                <!-- ç¨æ”¶å›¾è¡¨ -->
                <div class="chart-card">
                    <div class="card-header">
                        <div class="card-icon icon-tax">ğŸ’°</div>
                        <div class="card-title">ç¨æ”¶æ”¿ç­–å˜åŒ–</div>
                    </div>
                    <div class="chart-container">
                        <canvas id="taxRateChart"></canvas>
                    </div>
                </div>
                
                <!-- æŠ•èµ„ç»„åˆå›¾è¡¨ -->
                <div class="chart-card">
                    <div class="card-header">
                        <div class="card-icon icon-portfolio">ğŸ’¼</div>
                        <div class="card-title">æŠ•èµ„ç»„åˆé…ç½®</div>
                    </div>
                    <div class="chart-container">
                        <canvas id="portfolioChart"></canvas>
                    </div>
                </div>
                
                <!-- é€šèƒ€å›¾è¡¨ -->
                <div class="chart-card">
                    <div class="card-header">
                        <div class="card-icon icon-inflation">ğŸŒ¡ï¸</div>
                        <div class="card-title">é€šèƒ€æ°´å¹³ç›‘æµ‹</div>
                    </div>
                    <div class="chart-container">
                        <canvas id="inflationChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentData = {};
        
        async function initializeDashboard() {
            const loadingEl = document.getElementById('loading');
            const dashboardEl = document.getElementById('dashboard');
            const statusEl = document.getElementById('status-message');
            
            try {
                // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
                showStatus('info', 'ğŸ”„ æ­£åœ¨åŠ è½½é‡‘èæ•°æ®...');
                
                // åŠ è½½æ•°æ®
                const response = await fetch('financial_analysis_data.json');
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                currentData = await response.json();
                
                // éªŒè¯æ•°æ®å®Œæ•´æ€§
                if (!currentData.interest_rates || !currentData.tax_rates || 
                    !currentData.portfolio_holdings || !currentData.inflation_data) {
                    throw new Error('æ•°æ®ç»“æ„ä¸å®Œæ•´');
                }
                
                showStatus('success', `âœ… æ•°æ®åŠ è½½æˆåŠŸï¼åŒ…å« ${currentData.interest_rates.length} ä¸ªåˆ©ç‡æ•°æ®ç‚¹`);
                
                // æ˜¾ç¤ºä»ªè¡¨æ¿
                loadingEl.style.display = 'none';
                dashboardEl.style.display = 'block';
                
                // åˆ›å»ºå›¾è¡¨
                await createAllCharts();
                
                showStatus('success', 'ğŸ‰ ä»ªè¡¨æ¿åˆå§‹åŒ–å®Œæˆï¼');
                
            } catch (error) {
                console.error('ä»ªè¡¨æ¿åˆå§‹åŒ–å¤±è´¥:', error);
                loadingEl.innerHTML = `
                    <div class="error">
                        <h2>âŒ ä»ªè¡¨æ¿åŠ è½½å¤±è´¥</h2>
                        <p><strong>é”™è¯¯ä¿¡æ¯:</strong> ${error.message}</p>
                        <p>è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œæ•°æ®æ–‡ä»¶</p>
                    </div>
                `;
                showStatus('error', `âŒ åŠ è½½å¤±è´¥: ${error.message}`);
            }
        }
        
        function showStatus(type, message) {
            const statusEl = document.getElementById('status-message');
            statusEl.innerHTML = `<div class="${type}">${message}</div>`;
        }
        
        async function createAllCharts() {
            // åˆ›å»ºæ‰€æœ‰å›¾è¡¨ï¼ˆä½¿ç”¨ç®€åŒ–ç‰ˆæœ¬é¿å…é˜»å¡ï¼‰
            createInterestRateChart();
            createTaxRateChart();
            createPortfolioChart();
            createInflationChart();
        }
        
        function createInterestRateChart() {
            const ctx = document.getElementById('interestRateChart').getContext('2d');
            const data = currentData.interest_rates.slice(0, 100); // å–å‰100ä¸ªæ•°æ®ç‚¹
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.map(d => d.date.substring(0, 10)),
                    datasets: [{
                        label: 'è”é‚¦åŸºé‡‘åˆ©ç‡ (%)',
                        data: data.map(d => d.rate),
                        borderColor: '#FF6B6B',
                        backgroundColor: 'rgba(255, 107, 107, 0.1)',
                        borderWidth: 2,
                        pointRadius: 1,
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'top' }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            title: { display: true, text: 'åˆ©ç‡ (%)' }
                        },
                        x: {
                            display: true,
                            title: { display: true, text: 'æ—¶é—´' }
                        }
                    }
                }
            });
        }
        
        function createTaxRateChart() {
            const ctx = document.getElementById('taxRateChart').getContext('2d');
            const data = currentData.tax_rates.slice(0, 100);
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.map(d => d.date.substring(0, 10)),
                    datasets: [
                        {
                            label: 'ä¼ä¸šæ‰€å¾—ç¨ç‡ (%)',
                            data: data.map(d => d.corporate_tax),
                            borderColor: '#4ECDC4',
                            borderWidth: 2,
                            pointRadius: 1,
                            tension: 0.1
                        },
                        {
                            label: 'èµ„æœ¬åˆ©å¾—ç¨ç‡ (%)',
                            data: data.map(d => d.capital_gains_tax),
                            borderColor: '#45B7D1',
                            borderWidth: 2,
                            pointRadius: 1,
                            tension: 0.1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { position: 'top' } },
                    scales: {
                        y: {
                            beginAtZero: false,
                            title: { display: true, text: 'ç¨ç‡ (%)' }
                        }
                    }
                }
            });
        }
        
        function createPortfolioChart() {
            const ctx = document.getElementById('portfolioChart').getContext('2d');
            const data = currentData.portfolio_holdings.slice(0, 100);
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.map(d => d.date.substring(0, 10)),
                    datasets: [
                        {
                            label: 'è‚¡ç¥¨é…ç½® (%)',
                            data: data.map(d => d.equity_percentage),
                            borderColor: '#FF6B6B',
                            borderWidth: 2,
                            pointRadius: 1,
                            tension: 0.1
                        },
                        {
                            label: 'å€ºåˆ¸é…ç½® (%)',
                            data: data.map(d => d.bond_percentage),
                            borderColor: '#4ECDC4',
                            borderWidth: 2,
                            pointRadius: 1,
                            tension: 0.1
                        },
                        {
                            label: 'ç°é‡‘é…ç½® (%)',
                            data: data.map(d => d.cash_percentage),
                            borderColor: '#45B7D1',
                            borderWidth: 2,
                            pointRadius: 1,
                            tension: 0.1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { position: 'top' } },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            title: { display: true, text: 'é…ç½®æ¯”ä¾‹ (%)' }
                        }
                    }
                }
            });
        }
        
        function createInflationChart() {
            const ctx = document.getElementById('inflationChart').getContext('2d');
            const data = currentData.inflation_data.slice(0, 100);
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.map(d => d.date.substring(0, 10)),
                    datasets: [{
                        label: 'é€šèƒ€ç‡ (%)',
                        data: data.map(d => d.inflation_rate),
                        borderColor: '#96CEB4',
                        backgroundColor: 'rgba(150, 206, 180, 0.1)',
                        borderWidth: 2,
                        pointRadius: 1,
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { position: 'top' } },
                    scales: {
                        y: {
                            beginAtZero: false,
                            title: { display: true, text: 'é€šèƒ€ç‡ (%)' }
                        }
                    }
                }
            });
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', initializeDashboard);
    </script>
</body>
</html>