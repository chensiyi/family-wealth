<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°æ®åŠ è½½æµ‹è¯•</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div style="padding: 20px;">
        <h1>ğŸ“Š æ•°æ®åŠ è½½æµ‹è¯•</h1>
        <div id="status">æ­£åœ¨åŠ è½½æ•°æ®...</div>
        <div id="data-preview" style="margin-top: 20px;"></div>
        <canvas id="testChart" width="400" height="200"></canvas>
    </div>

    <script>
        async function testDataLoading() {
            const statusDiv = document.getElementById('status');
            const previewDiv = document.getElementById('data-preview');
            
            try {
                statusDiv.innerHTML = 'ğŸ”„ æ­£åœ¨è¯·æ±‚æ•°æ®...';
                
                // æµ‹è¯•æ•°æ®æ–‡ä»¶è®¿é—®
                const response = await fetch('financial_analysis_data.json');
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                statusDiv.innerHTML = `âœ… æ•°æ®åŠ è½½æˆåŠŸï¼çŠ¶æ€ç : ${response.status}`;
                
                // æ˜¾ç¤ºæ•°æ®é¢„è§ˆ
                previewDiv.innerHTML = `
                    <h3>æ•°æ®é¢„è§ˆ:</h3>
                    <p><strong>ç”Ÿæˆæ—¶é—´:</strong> ${data.metadata?.generated_at || 'æœªçŸ¥'}</p>
                    <p><strong>æ•°æ®æœŸé—´:</strong> ${data.metadata?.period || 'æœªçŸ¥'}</p>
                    <p><strong>åˆ©ç‡æ•°æ®ç‚¹:</strong> ${data.interest_rates?.length || 0}</p>
                    <p><strong>ç¨æ”¶æ•°æ®ç‚¹:</strong> ${data.tax_rates?.length || 0}</p>
                    <p><strong>æŠ•èµ„ç»„åˆæ•°æ®ç‚¹:</strong> ${data.portfolio_holdings?.length || 0}</p>
                    <p><strong>é€šèƒ€æ•°æ®ç‚¹:</strong> ${data.inflation_data?.length || 0}</p>
                `;
                
                // åˆ›å»ºç®€å•å›¾è¡¨æµ‹è¯•
                if (data.interest_rates && data.interest_rates.length > 0) {
                    createTestChart(data.interest_rates);
                }
                
            } catch (error) {
                statusDiv.innerHTML = `âŒ æ•°æ®åŠ è½½å¤±è´¥: ${error.message}`;
                console.error('åŠ è½½é”™è¯¯:', error);
            }
        }
        
        function createTestChart(data) {
            const ctx = document.getElementById('testChart').getContext('2d');
            
            // å–å‰20ä¸ªæ•°æ®ç‚¹è¿›è¡Œæµ‹è¯•
            const sampleData = data.slice(0, 20);
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: sampleData.map(d => d.date),
                    datasets: [{
                        label: 'åˆ©ç‡ (%)',
                        data: sampleData.map(d => d.rate),
                        borderColor: '#FF6B6B',
                        backgroundColor: 'rgba(255, 107, 107, 0.1)',
                        borderWidth: 2,
                        pointRadius: 3
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'åˆ©ç‡æ•°æ®æµ‹è¯•å›¾è¡¨'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false
                        }
                    }
                }
            });
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œæµ‹è¯•
        document.addEventListener('DOMContentLoaded', testDataLoading);
    </script>
</body>
</html>